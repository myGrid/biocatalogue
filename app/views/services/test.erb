<%
#request = params[:endpoint] + "?request=getCapabilities&service=wms"

require 'net/http'
require "rexml/document"

url = URI.parse('http://sampleserver1.arcgisonline.com/ArcGIS/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/WMSServer?service=WMS&request=GetCapabilities&version=1.3.0')


#url = URI.parse('http://www.gebco.net/data_and_products/gebco_web_services/web_map_service/mapserv?request=getCapabilities&service=wms&version=1.1.1')
#url = URI.parse(request)
req = Net::HTTP::Get.new(url.to_s)
res = Net::HTTP.start(url.host, url.port) {|http| http.request(req) }

#--------------   REXML
doc = REXML::Document.new res.body
service_element = doc.elements[1].elements[1]
capability_element = doc.elements[1].elements[2]

%>
<%= service_element.elements.size %>
<%= '<br />'.html_safe %>
<% for i in 1..service_element.elements.size
   if !service_element.elements[i].has_elements? %>
    <%=  service_element.elements[i].name %>
    <%= ':     ' %>
    <%= service_element.elements[i].text %>
    <%= '<br />'.html_safe %>
   <% end %>
<% end %>

<%= @asda %>
